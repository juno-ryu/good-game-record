# 제품 요구사항 문서 (PRD4)

## 기능명

**MatchCard 아코디언 상세정보 (Accordion Detail View)**

---

## 1. 개요

PRD4는 각 **MatchCard(전적 카드)** 클릭 시 확장되는 **세부 경기 데이터(아코디언 상세정보)**를 구현하는 스프린트이다.  
이 섹션은 한 경기 내 모든 플레이어의 세부 스탯(KDA, 딜량, 시야, 아이템, 포지션, 티어 등)을  
팀별(블루팀 / 레드팀)로 구분하여 표시하며,  
사용자가 **게임의 맥락을 시각적으로 이해할 수 있도록 하는 핵심 UI**이다.

---

## 2. 목적 및 필요성

- 전적 리스트를 넘기지 않고도 **한 경기의 전체 맵 데이터를 빠르게 확인** 가능.
- 블루팀 vs 레드팀 구도를 통해 **팀 단위 비교**가 직관적으로 가능해야 함.
- 데이터의 양이 많으므로 **정돈된 테이블 구조 및 색상 대비**가 필요함.

---

## 3. 목표

- 클릭 시 MatchCard 아래로 자연스러운 **Accordion 확장 애니메이션(Fade + Slide)**
- **팀별 전적표 구조 구현** (블루팀 / 레드팀)
- 각 플레이어별 **챔피언, 티어, KDA, 딜량, CS, 와드, 아이템** 표시
- 중앙 요약줄에 **팀별 Total Kill / Total Gold 비교** 표시
- 승리 팀 / 패배 팀 시각적 구분 (컬러 코드)
- 데이터 렌더링 시간 1초 이하

---

## 4. 사용자 시나리오

1. 사용자가 MatchCard(한 경기)를 클릭
2. 하단으로 부드럽게 아코디언 영역이 확장됨
3. 각 팀의 플레이어 목록(5명씩) 표시
4. 주요 데이터: OP Score / KDA / 딜량 / 시야 / CS / 아이템
5. 중앙 라인에서 팀별 Total Kill, Total Gold 비교 그래프 표시
6. 승리 팀은 파란 배경(`레드팀 승리` 시 파란 tone), 패배 팀은 붉은 tone
7. Collapse(접기) 시 부드럽게 축소

---

## 5. 기능 요구사항

### ✅ 핵심 UI 구성

#### A. 팀 단위 구조

| 구역          | 설명                                                |
| ------------- | --------------------------------------------------- |
| 상단 (패배팀) | 블루팀 데이터, 배경색 `#312B2B`, 포인트색 `#D43F3A` |
| 중앙 라인     | 팀별 비교 지표 (Total Kill / Total Gold)            |
| 하단 (승리팀) | 레드팀 데이터, 배경색 `#2B2D35`, 포인트색 `#4D7CFE` |

progressbar를 활용한 중앙 라인 ui 처리

---

#### B. 플레이어 데이터 행 구조

| 항목        | 데이터 필드                                 | 예시       | 설명                        |
| ----------- | ------------------------------------------- | ---------- | --------------------------- |
| 챔피언      | `championName`                              | Yasuo      | 챔피언 아이콘 + 레벨        |
| 티어        | (별도 API `/league/v4/entries/by-summoner`) | Silver 3   | 소환사 랭크                 |
| OP Score    | 계산 필드 (커스텀)                          | 7.6        | 종합 점수 (KDA/딜량 가중치) |
| KDA         | `kills/deaths/assists`                      | 8/1/0      | 킬/데스/어시 표시           |
| 킬관여      | `challenges.killParticipation`              | 39%        | 퍼센트 표시                 |
| 딜량 그래프 | `totalDamageDealtToChampions`               | 막대그래프 | 팀 내 비율 시각화           |
| 시야 점수   | `visionScore`                               | 22         |                             |
| CS          | `totalMinionsKilled + neutralMinionsKilled` | 146        | 분당 표시 포함              |
| 아이템      | `item0~6`                                   | 아이콘 6개 | 빈 슬롯은 투명처리          |
| 포지션      | `teamPosition`                              | MIDDLE     | 아이콘으로 표시             |
| 상태        | `win`                                       | 승/패      | 배경색 강조                 |

---

#### C. 중앙 요약 라인

| 항목                  | 설명                                         |
| --------------------- | -------------------------------------------- |
| Total Kill            | 두 팀의 킬 합 비교 (막대 그래프 + 수치 표시) |
| Total Gold            | 두 팀의 총 골드 합 비교 (색상 막대)          |
| 타워/드래곤/바론 지표 | `teams[].objectives` 참조                    |

---

## 6. UI/UX 요구사항

- **컬러 시스템**

  - 승리 팀(레드): `#4D7CFE`
  - 패배 팀(블루): `#D43F3A`
  - 배경 다크톤: `#1F1F23` / `#2B2B30`
  - 글자: `#E6E6E6`, 서브: `#A0A0A0`

- **폰트 계층**

  - 팀명 헤더: `text-lg font-bold`
  - 플레이어 행: `text-sm`
  - KDA 강조: `font-semibold text-blue-300`

- **애니메이션**

  - 아코디언 열림/닫힘: Framer Motion (`height` + `opacity`)
  - 그래프: `width` 애니메이션 (딜량 비율에 따라 확장)

- **반응형 레이아웃**
  - Desktop: 좌우 2열(패배/승리 나란히)
  - Mobile: 세로 스크롤 구조로 전환

---

## 7. 데이터 바인딩

| UI 요소       | 데이터 경로                                   | 비고                               |
| ------------- | --------------------------------------------- | ---------------------------------- |
| 팀 구분       | `participant.teamId`                          | 100: 블루 / 200: 레드              |
| 플레이어 목록 | `participants.filter(teamId)`                 |                                    |
| Total Kill    | `sum(kills)`                                  |                                    |
| Total Gold    | `sum(goldEarned)`                             |                                    |
| 티어          | `/league/v4/entries/by-summoner/{summonerId}` | 별도 호출                          |
| 포지션        | `teamPosition`                                | MID / TOP / ADC / SUPPORT / JUNGLE |

---

## 8. 비기능 요구사항

- 렌더링: 아코디언 열림 후 데이터 1초 내 표시
- 성능: 팀당 5명 \* 2 = 10명 데이터 렌더링 시 60FPS 유지
- API 요청: 티어 API는 병렬 처리 (Promise.all)
- 접근성: 키보드로 열고 닫기 가능 (`Enter`, `Space`)

---

## 9. 성공 지표

- 아코디언 열림 응답 시간 < 1초
- 데이터 로딩 성공률 99% 이상
- 사용자가 상세 보기 후 평균 체류 시간 3초 이상

---

## 10. 일정 및 마일스톤

| 단계            | 기간                                      | 주요 산출물                   |
| --------------- | ----------------------------------------- | ----------------------------- |
| 구조 설계       | 1일                                       | 팀별 데이터 구조 및 타입 정의 |
| UI 구현         | 2일                                       | 테이블/그래프/아이콘 UI 완성  |
| 애니메이션 추가 | 1일                                       | 아코디언 전환효과             |
| 데이터 연동     | 1일                                       | API 매핑 및 캐싱              |
| 테스트/리팩토링 | 1일                                       | 성능 및 UX 개선               |
| **총 5~6일**    | PRD4 완료 → PRD5(그래프 시각화/분석) 진행 |

---

## 11. 향후 확장 계획

- 각 경기별 **딜량 TOP3 하이라이트 기능**
- **팀 KDA 비율 그래프** 추가
- **AI 기반 OP Score 자동 계산** 로직 도입

---

## 12. 참고 시안

> 참조 이미지: `/assets/reference/match_detail_accordion.png`  
> (예시: 블루팀/레드팀 전적 비교 화면)
