# 제품 요구사항 문서 (PRD2)

## 기능명

**매치 데이터 조회 및 시각화 모듈**

---

## 1. 개요

이 모듈은 `GGR`의 핵심 기능 중 하나로,  
사용자가 입력한 소환사명을 통해 Riot API에서 가져온 **매치(게임) 데이터를 시각적으로 표시**한다.  
PRD1(Input Module)에서 검색한 결과를 기반으로 **최근 경기 리스트, 승패, KDA, 챔피언, 게임 시간 등 핵심 전적 정보를 화면에 렌더링**하는 역할을 담당한다.

---

## 2. 목적 및 필요성

- 유저가 자신이 플레이한 최근 경기 데이터를 직관적으로 확인할 수 있어야 함.
- 단순 텍스트 나열이 아닌 **시각적으로 한눈에 파악 가능한 UI 구성**이 중요.
- 플레이 결과(승/패, 킬관여율, 포지션 등)를 통해 유저가 자신의 플레이 패턴을 이해할 수 있도록 지원.

---

## 3. 목표

- **최근 10~20판 전적 데이터를 화면에 표시**
- **승패별 색상 구분 (승리: 파랑 / 패배: 붉은색)**
- **한 경기 클릭 시 상세 정보 모달 또는 드롭다운 표시**
- **평균 KDA, 승률 등 요약 통계 함께 제공**

---

## 4. 사용자 시나리오

1. 사용자가 소환사명을 검색 (PRD1 완료)
2. 시스템이 Riot API를 통해 매치 ID 리스트 요청
3. 각 매치 ID별 상세 정보(`/lol/match/v5/matches/{matchId}`) 호출
4. 응답받은 데이터 중 주요 지표 추출 (승패, 챔피언, KDA, 포지션, 게임 길이 등)
5. 이를 **UI 카드 리스트 형태**로 렌더링
6. 사용자는 각 경기 클릭 → 상세 모달에서 팀별 스탯 확인 가능

---

## 5. 기능 요구사항

### ✅ 핵심 기능

1.  **매치 데이터 요청**

    - Riot API 엔드포인트
      ```
      /lol/match/v5/matches/by-puuid/{puuid}/ids
      /lol/match/v5/matches/{matchId}
      ```
    - 최근 10~20판 기준 데이터 호출
    - 캐싱 전략 적용 (SWR, React Query 등)

2.  **데이터 정제 및 가공**

    - 필요 필드만 추출  
      | 항목 | 필드명 | 예시 |
      |------|---------|------|
      | 결과 | `info.participants.win` | true / false |
      | 챔피언 | `info.participants.championName` | “Ahri” |
      | 킬/데스/어시 | `kills / deaths / assists` | “12/3/8” |
      | 라인 | `teamPosition` | “MIDDLE” |
      | 게임 길이 | `gameDuration` | “32분 10초” |
      | 날짜 | `gameStartTimestamp` | “2025-10-12” |

3.  **UI 렌더링**

    - 카드형 리스트 (각 경기 1행 구조)
    - 승리/패배 색상 시각화
    - 최근 경기 요약 통계 상단 표시 (예: “최근 10경기 중 7승 3패, 평균 KDA 3.2”)
    - 반응형 구성 (모바일/데스크톱)

4.  **상세 모달 보기**
    - 클릭 시 해당 경기의 세부정보 표시
    - 아군/적군 KDA, 아이템, 룬, 딜량 등
    - 닫기 버튼 및 외부 클릭 시 모달 닫힘

---

## 5. UI/UX 요구사항

- **메인 구성:**
  - 상단: “최근 경기 요약 통계”
  - 본문: “경기 리스트 (카드 10~20개)”
- **색상 규칙:** 승리(파란색 계열), 패배(붉은색 계열)
- **반응형 디자인:** 모바일 기준 한 줄 1개, PC 기준 2열 그리드
- **로딩 상태:** 데이터 로드 중 스피너 표시
- **에러 상태:** “전적 데이터를 불러올 수 없습니다. 잠시 후 다시 시도해주세요.”

---

## 6. 향후 확장 계획

- **티어별 비교 통계 시각화 (Radar Chart)**
- **최근 챔피언별 KDA 추이 그래프**
- **API 호출 병렬화로 로딩 시간 최적화**

---

## 7. 참고 API 문서

- [Riot Games Developer API – Match v5](https://developer.riotgames.com/apis#match-v5/GET_getMatchIdsByPUUID)

---

### **작업 계획서: 매치 데이터 조회 및 시각화 모듈**

**1. 목표:** 사용자가 검색한 소환사의 최근 게임 전적을 API를 통해 가져와, 핵심 정보를 시각적으로 명확하게 확인할 수 있는 UI 컴포넌트를 개발합니다.

**2. 개발 단계:**

- **1단계: 백엔드 API 라우트 및 데이터 관리 설계**

  - **API 라우트 구현:**
    - Riot API로부터 매치 ID 리스트(`.../by-puuid/{puuid}/ids`)와 각 매치의 상세 데이터(`.../matches/{matchId}`)를 순차적으로 호출하는 백엔드 API를 `app/api/matches/[puuid]/route.ts` 경로에 구현합니다.
    - API 응답 데이터 중 UI에 필요한 항목(승패, 챔피언, KDA, 게임 시간 등)을 선별하여 가공하는 로직을 추가합니다.
  - **상태 관리 설계:**
    - `zustand`를 사용하여 매치 데이터, API 호출 상태(로딩, 성공, 에러), 요약 통계를 관리할 `store/match-store.ts`를 생성합니다.

- **2단계: 핵심 UI 컴포넌트 개발**

  - `shared/components/match-history` 디렉토리를 생성하고 관련 컴포넌트를 배치합니다.
  - **매치 요약 컴포넌트 (`match-summary.tsx`):**
    - "최근 20경기 10승 10패, 평균 KDA 3.2"와 같은 요약 정보를 표시합니다.
  - **매치 카드 컴포넌트 (`match-card.tsx`):**
    - 단일 경기의 핵심 정보(챔피언 아이콘, KDA, 아이템 등)를 표시하는 카드 UI를 구현합니다.
    - 승리 시 파란색, 패배 시 붉은색 계열로 배경색을 동적으로 변경합니다.
  - **매치 리스트 컴포넌트 (`match-list.tsx`):**
    - `match-card`를 리스트 형태로 렌더링합니다.
    - 데이터 로딩 중에는 스켈레톤 UI 또는 스피너를, API 에러 발생 시에는 에러 메시지를 표시하는 로직을 처리합니다.

- **3단계: 상세 정보 모달 개발**

  - **상세 모달 컴포넌트 (`match-detail-modal.tsx`):**
    - `radix-ui`의 Dialog(모달) 컴포넌트를 활용합니다.
    - `match-card` 클릭 시, 해당 경기의 아군/적군 팀 상세 데이터(룬, 스펠, 딜량, 받은 피해량 등)를 표시하는 모달 창을 구현합니다.

- **4단계: 페이지 통합 및 최종 검증**
  - 메인 페이지(`app/page.tsx`)에서 소환사 검색이 완료되면, `summoner-store`에 저장된 `puuid`를 이용해 `match-list` 컴포넌트를 호출하여 화면에 렌더링합니다.
  - 모바일과 데스크톱 환경에서 UI가 깨짐 없이 표시되는지 반응형 디자인을 최종 검증합니다.
